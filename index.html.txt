<!doctype html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Mini Monopoly Dice â€” Ù„Ø¹Ø¨Ø© Ø§Ù„Ù†Ø±Ø¯</title>
<style>
  /* ØªØµÙ…ÙŠÙ… ÙŠØºØ·ÙŠ ÙƒØ§Ù…Ù„ Ø§Ù„ØµÙØ­Ø© */
  :root{--bg1:#07121a;--bg2:#062a21;--accent:#d4af37;--glass:rgba(255,255,255,0.03)}
  html,body{height:100%;margin:0;font-family:Inter, system-ui, Arial; -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale}
  body{background:linear-gradient(180deg,var(--bg1),#021f1b);display:flex;align-items:center;justify-content:center;color:#e8fbf4}
  /* Ù„ÙˆØ­Ø© Ø§Ù„Ù„Ø¹Ø¨Ø© Ù…Ø±ÙƒØ²ÙŠØ©ØŒ ØªØºØ·ÙŠ Ø§Ù„ØµÙØ­Ø© Ø¨Ø§Ù„ÙƒØ§Ù…Ù„ */
  #game-wrap{position:relative;width:100%;height:100vh;display:grid;grid-template-columns:1fr 420px;gap:22px;padding:34px;box-sizing:border-box;align-items:stretch}
  /* Ø¹Ù„Ù‰ Ø§Ù„Ø´Ø§Ø´Ø§Øª Ø§Ù„ØµØºÙŠØ±Ø© ØªØµØ¨Ø­ Ø¹Ù…ÙˆØ¯ÙŠØ© */
  @media (max-width:980px){#game-wrap{grid-template-columns:1fr;grid-auto-rows:1fr 240px;padding:18px;}}
  /* Ù…Ø³Ø±Ø­ 3D ÙŠØºØ·ÙŠ Ø§Ù„Ù…Ø³Ø§Ø­Ø© Ø§Ù„ÙƒØ¨ÙŠØ±Ø© */
  .stage{border-radius:18px;background:linear-gradient(180deg,#093226,#05221a);box-shadow:0 30px 80px rgba(0,0,0,0.6);position:relative;overflow:hidden;display:flex;align-items:center;justify-content:center;min-height:520px}
  #canvas-wrap{position:relative;width:100%;height:100%}
  canvas{display:block;width:100%;height:100%}
  /* Ø§Ù„Ù„ÙˆØ­Ø© Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ© (Ø§Ù„ØªØ­ÙƒÙ…) */
  .panel{width:100%;max-width:420px;background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(0,0,0,0.04));border-radius:16px;padding:22px;box-sizing:border-box;align-self:start;backdrop-filter: blur(6px)}
  .brand{display:flex;gap:12px;align-items:center;margin-bottom:12px}
  .logo-star{background:linear-gradient(90deg,#10b981,#06b6d4);padding:8px 12px;border-radius:8px;font-weight:800;color:#042;box-shadow:0 8px 30px rgba(16,185,129,0.10)}
  h1{margin:0;font-size:20px}
  .desc{opacity:0.85;margin-top:6px;color:#dffcf5}
  .controls{display:flex;flex-direction:column;gap:12px;margin-top:18px}
  .btn{background:linear-gradient(180deg,var(--accent),#f0c36a);border:none;padding:14px 18px;border-radius:12px;font-weight:800;cursor:pointer;box-shadow:0 12px 40px rgba(0,0,0,0.45);color:#06120a;letter-spacing:0.6px;font-size:15px}
  .btn:active{transform:translateY(1px)}
  .result{background:var(--glass);padding:12px;border-radius:10px;font-weight:700;min-height:64px;display:flex;align-items:center;justify-content:center;color:#eafbf8}
  .small{font-size:13px;opacity:0.78}
  footer.credit{position:absolute;left:22px;bottom:18px;color:rgba(255,255,255,0.45);font-size:13px}
  /* Ø¯ÙŠÙƒÙˆØ± Ø·ÙÙŠÙ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø³Ø±Ø­ */
  .table-label{position:absolute;top:22px;right:32px;background:linear-gradient(180deg,rgba(0,0,0,0.25),rgba(255,255,255,0.02));padding:8px 12px;border-radius:12px;color:#dffcf5;font-weight:700;box-shadow:0 8px 30px rgba(0,0,0,0.45)}
</style>
</head>
<body>
  <div id="game-wrap">
    <div class="stage" aria-hidden="false">
      <div id="canvas-wrap">
        <canvas id="c"></canvas>
        <div class="table-label">Star Board â€” Ø·Ø§ÙˆÙ„Ø© Ø§Ù„Ù†Ø±Ø¯</div>
        <footer class="credit">Ù†Ø³Ø®Ø© Ø§Ø­ØªØ±Ø§ÙÙŠØ© â€” ØªØµÙ…ÙŠÙ… Ù…ÙˆÙ†ÙˆØ¨ÙˆÙ„ÙŠ Ù…Ø¨Ø³Ù‘Ø·</footer>
      </div>
    </div>

    <div class="panel" aria-hidden="false">
      <div class="brand">
        <div class="logo-star">STAR</div>
        <div>
          <h1>Mini Monopoly Dice</h1>
          <div class="desc small">Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Â«Ø§Ø¨Ø¯Ø£Â» Ù„Ø±Ù…ÙŠ Ø§Ù„Ù†Ø±Ø¯ â€” ØªØµÙ…ÙŠÙ… 3D Ø§Ø­ØªØ±Ø§ÙÙŠØŒ ÙŠØ¹Ù…Ù„ Ø¹Ù„Ù‰ Ø§Ù„Ø­Ø§Ø³ÙˆØ¨ ÙˆØ§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„.</div>
        </div>
      </div>

      <div class="controls">
        <button id="startBtn" class="btn">Ø§Ø¨Ø¯Ø£ / Ø±Ù…ÙŠ Ø§Ù„Ù†Ø±Ø¯ ğŸ²</button>
        <div id="result" class="result">Ø§Ø¶ØºØ· Ø²Ø± Ø§Ù„Ø¨Ø¯Ø¡ Ù„Ø±Ù…ÙŠ Ø§Ù„Ù†Ø±Ø¯...</div>
        <div class="small" style="opacity:0.75">ÙŠÙ…ÙƒÙ†Ùƒ Ø£ÙŠØ¶Ø§Ù‹ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ù…ÙØªØ§Ø­ Ø§Ù„Ù…Ø³Ø§ÙØ© (Space) Ù„Ù„Ø±Ù…ÙŠ.</div>
      </div>
    </div>
  </div>

  <!-- ØªØ­Ù…ÙŠÙ„ Ù…ÙƒØªØ¨Ø§Øª (Ù†Ø³Ø®Ø© UMD Ø¹Ø¨Ø± CDN) - ØªØ¹Ù…Ù„ ÙÙŠ Ù…Ø¹Ø¸Ù… Ù…Ù†ØµØ§Øª Ø§Ù„Ù…Ø¯ÙˆÙ†Ø§Øª -->
  <script src="https://unpkg.com/three@0.153.0/build/three.min.js"></script>
  <script src="https://unpkg.com/three@0.153.0/examples/js/controls/OrbitControls.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/gsap@3.11.5/dist/gsap.min.js"></script>

  <script>
  /**
   * Ù†Ø³Ø®Ø© Ø§Ø­ØªØ±Ø§ÙÙŠØ©: WebGL + THREE.js (UMD) + GSAP (global)
   * Ø¥Ø°Ø§ Ù…Ø¯ÙˆÙ†ØªÙƒ ØªÙ…Ù†Ø¹ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø³ÙƒØ±Ø¨ØªØ§Øª Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠØ©ØŒ Ø£Ø®Ø¨Ø±Ù†ÙŠ Ù„Ø£Ø¹Ø·ÙŠÙƒ Ù†Ø³Ø®Ø© Ù…Ø¶Ù…Ù‘Ù†Ø© Ø¨Ø§Ù„ÙƒØ§Ù…Ù„.
   */

  (function(){
    // Ø¹Ù†Ø§ØµØ± DOM
    const canvas = document.getElementById('c');
    const startBtn = document.getElementById('startBtn');
    const resultEl = document.getElementById('result');

    // Three.js renderer & scene
    const scene = new THREE.Scene();
    const renderer = new THREE.WebGLRenderer({canvas: canvas, antialias:true, alpha:true});
    renderer.setPixelRatio(Math.min(window.devicePixelRatio || 1, 2));
    renderer.shadowMap.enabled = true;

    const camera = new THREE.PerspectiveCamera(40,1,0.1,100);
    camera.position.set(3.6,3.6,3.6);

    const controls = new THREE.OrbitControls(camera, renderer.domElement);
    controls.enableDamping = true;
    controls.enablePan = false;
    controls.minDistance = 3; controls.maxDistance = 10;

    // Ø¥Ø¶Ø§Ø¡Ø©
    const hemi = new THREE.HemisphereLight(0xffffff, 0x444444, 0.75);
    scene.add(hemi);
    const dir = new THREE.DirectionalLight(0xffffff, 1.0);
    dir.position.set(5,10,7); dir.castShadow = true; dir.shadow.radius = 6;
    scene.add(dir);

    // Ø£Ø±Ø¶ÙŠØ© Ø·Ø§ÙˆÙ„Ø© Ù…Ù…ÙŠØ²Ø©
    const ground = new THREE.Mesh(
      new THREE.CircleGeometry(8, 64),
      new THREE.MeshStandardMaterial({color:0x063025, roughness:0.8, metalness:0.04})
    );
    ground.rotation.x = -Math.PI/2; ground.position.y = -0.55;
    scene.add(ground);

    // Ø­Ù„Ù‚Ø© ÙØ§Ø®Ø±Ø© Ø­ÙˆÙ„ Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø±Ù…ÙŠ
    const ring = new THREE.Mesh(
      new THREE.RingGeometry(2.8, 3.6, 64),
      new THREE.MeshStandardMaterial({color:0x083a2a, side:THREE.DoubleSide})
    );
    ring.rotation.x = -Math.PI/2; ring.position.y = -0.545; scene.add(ring);

    // Ø¸Ù„ Ø¯Ø§Ø¦Ø±ÙŠ Ø®ÙÙŠÙ
    const shadow = new THREE.Mesh(
      new THREE.PlaneGeometry(3.2,3.2),
      new THREE.MeshBasicMaterial({color:0x000000, opacity:0.12, transparent:true})
    );
    shadow.rotation.x = -Math.PI/2; shadow.position.y = 0.01; scene.add(shadow);

    // ØªØ§Ø¨Ø¹ Ù„Ø¥Ù†Ø´Ø§Ø¡Texture Ù„Ù„Ù†Ø±Ø¯ Ø¹Ø¨Ø± canvas (Ù…Ø¸Ù‡Ø± Ø£Ø¨ÙŠØ¶ Ø¨Ù†Ù‚Ø§Ø· Ø°Ù‡Ø¨ÙŠØ© Ø¯Ø§Ø®Ù„ Ø¥Ø·Ø§Ø±)
    function makeDotTexture(n){
      const size = 512;
      const c = document.createElement('canvas'); c.width = size; c.height = size;
      const ctx = c.getContext('2d');
      // Ø®Ù„ÙÙŠØ© Ø¨ÙŠØ¶Ø§Ø¡
      ctx.fillStyle = '#ffffff'; ctx.fillRect(0,0,size,size);
      // Ø¥Ø·Ø§Ø± Ø°Ù‡Ø¨ÙŠ Ø£Ù†ÙŠÙ‚
      ctx.strokeStyle = '#d4af37'; ctx.lineWidth = 22; ctx.strokeRect(12,12,size-24,size-24);
      // Ù†Ù‚Ø§Ø·
      ctx.fillStyle = '#0b1720';
      const r = 28;
      const positions = {
        1:[[0.5,0.5]],
        2:[[0.25,0.25],[0.75,0.75]],
        3:[[0.2,0.2],[0.5,0.5],[0.8,0.8]],
        4:[[0.25,0.25],[0.25,0.75],[0.75,0.25],[0.75,0.75]],
        5:[[0.25,0.25],[0.25,0.75],[0.75,0.25],[0.75,0.75],[0.5,0.5]],
        6:[[0.23,0.18],[0.23,0.5],[0.23,0.82],[0.77,0.18],[0.77,0.5],[0.77,0.82]]
      };
      (positions[n]||positions[1]).forEach(p=>{ ctx.beginPath(); ctx.arc(p[0]*size, p[1]*size, r, 0, Math.PI*2); ctx.fill(); });
      const tex = new THREE.CanvasTexture(c);
      tex.encoding = THREE.sRGBEncoding;
      tex.anisotropy = renderer.capabilities.getMaxAnisotropy();
      tex.needsUpdate = true;
      return tex;
    }

    // Ø¥Ù†Ø´Ø§Ø¡ Ù…ÙƒØ¹Ø¨ Ø§Ù„Ù†Ø±Ø¯ Ø¨Ù…ÙˆØ§Ø¯ Ù„ÙƒÙ„ ÙˆØ¬Ù‡
    const geom = new THREE.BoxGeometry(1,1,1);
    const mats = [
      new THREE.MeshStandardMaterial({map: makeDotTexture(3)}), // +X
      new THREE.MeshStandardMaterial({map: makeDotTexture(4)}), // -X
      new THREE.MeshStandardMaterial({map: makeDotTexture(2)}), // +Y (top)
      new THREE.MeshStandardMaterial({map: makeDotTexture(5)}), // -Y (bottom)
      new THREE.MeshStandardMaterial({map: makeDotTexture(1)}), // +Z
      new THREE.MeshStandardMaterial({map: makeDotTexture(6)})  // -Z
    ];
    const dice = new THREE.Mesh(geom, mats);
    dice.castShadow = true; dice.receiveShadow = true;
    dice.position.y = 0.5;
    dice.rotation.set(0.2, 0.8, 0.1);
    scene.add(dice);

    // Ø®Ø±Ø§Ø¦Ø· Ø§Ù„ÙˆØ¬ÙˆÙ‡ ÙˆØ§Ù„Ù…Ø¬Ø³Ù… Ù„ØªØ­Ø¯ÙŠØ¯ Ø§Ù„ÙˆØ¬Ù‡ Ø§Ù„Ø¹Ù„ÙˆÙŠ
    const faceNormals = [ new THREE.Vector3(1,0,0), new THREE.Vector3(-1,0,0), new THREE.Vector3(0,1,0), new THREE.Vector3(0,-1,0), new THREE.Vector3(0,0,1), new THREE.Vector3(0,0,-1) ];
    const faceToNumber = [3,4,2,5,1,6]; // ØªØªØ¨Ø¹ Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„ØªÙŠ ÙˆØ¶Ø¹Ù†Ø§Ù‡Ø§

    function getTopNumber(){
      let best = -1; let bestDot = -Infinity;
      const up = new THREE.Vector3(0,1,0);
      for(let i=0;i<faceNormals.length;i++){
        const n = faceNormals[i].clone().applyQuaternion(dice.quaternion);
        const d = n.dot(up);
        if(d > bestDot){ bestDot = d; best = i; }
      }
      return faceToNumber[best];
    }

    // Canonical eulers Ù„Ù„ØªØ«Ø¨ÙŠØª Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ (snap)
    const faceEulers = [
      new THREE.Euler(0, -Math.PI/2, 0), // +X -> 3
      new THREE.Euler(0, Math.PI/2, 0),  // -X -> 4
      new THREE.Euler(-Math.PI/2, 0, 0), // +Y -> 2
      new THREE.Euler(Math.PI/2, 0, 0),  // -Y -> 5
      new THREE.Euler(0, 0, 0),          // +Z -> 1
      new THREE.Euler(0, Math.PI, 0)     // -Z -> 6
    ];

    // Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø­Ø¬Ù… ÙˆØ§Ù„Ù€resize
    function resize(){
      const wrap = document.getElementById('canvas-wrap');
      const w = Math.max(320, wrap.clientWidth);
      const h = Math.max(320, wrap.clientHeight);
      renderer.setSize(w,h);
      camera.aspect = w/h; camera.updateProjectionMatrix();
    }
    window.addEventListener('resize', resize);
    resize();

    // Ø£ØµÙˆØ§Øª: Ù†Ø³ØªØ®Ø¯Ù… WebAudio Ù„ØµÙ†Ø¹ ØµÙˆØª Ø±Ù…ÙŠ Ù‚ØµÙŠØ± (Ù„Ø§ Ù…Ù„ÙØ§Øª Ø®Ø§Ø±Ø¬ÙŠØ©)
    const audioCtx = (window.AudioContext || window.webkitAudioContext) ? new (window.AudioContext || window.webkitAudioContext)() : null;
    function playRollSound(){
      if(!audioCtx) return;
      const now = audioCtx.currentTime;
      // noise burst
      const bufferSize = audioCtx.sampleRate * 0.15;
      const buffer = audioCtx.createBuffer(1, bufferSize, audioCtx.sampleRate);
      const data = buffer.getChannelData(0);
      for(let i=0;i<bufferSize;i++){
        // Ø´ÙƒÙ„ Ù…Ø®ØªÙ„Ø· Ù„Ù„Ù€ noise Ù…Ø´ÙˆØ´ Ø«Ù… Ø§Ù†Ø®ÙØ§Ø¶ gain
        data[i] = (Math.random()*2-1) * Math.exp(-3 * i / bufferSize);
      }
      const src = audioCtx.createBufferSource();
      src.buffer = buffer;
      const low = audioCtx.createBiquadFilter(); low.type = 'lowpass'; low.frequency.value = 1200;
      const gain = audioCtx.createGain(); gain.gain.value = 0.6;
      src.connect(low); low.connect(gain); gain.connect(audioCtx.destination);
      src.start(now);
      // Ø±Ù†ÙŠÙ† Ø®ÙÙŠÙ (tone)
      const osc = audioCtx.createOscillator();
      const g2 = audioCtx.createGain(); g2.gain.value = 0.12;
      osc.type = 'sawtooth'; osc.frequency.setValueAtTime(420, now); osc.frequency.exponentialRampToValueAtTime(220, now+0.12);
      osc.connect(g2); g2.connect(audioCtx.destination);
      osc.start(now); osc.stop(now+0.12);
    }

    // Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ø­Ø¸
    function getLuckMessage(n){
      const msgs = {
        6: 'Ø§Ù„Ø­Ø¸ Ù…Ø¹Ùƒ Ø§Ù„ÙŠÙˆÙ… â€” ÙŠÙˆÙ… Ù…Ù…ØªØ§Ø²! ğŸ‰',
        5: 'Ø­Ø¸ Ø·ÙŠØ¨ â€” ÙØ±ØµØ© Ø¬ÙŠØ¯Ø©! âœ¨',
        4: 'Ø­Ø¸ Ù…ØªÙˆØ³Ø· â€” Ø±Ø¨Ù…Ø§ Ø®Ø·ÙˆØ© Ù„Ù„Ø£Ù…Ø§Ù….',
        3: 'Ø­Ø¸ Ù…ØªÙ‚Ù„Ø¨ â€” ÙƒÙ† Ø­Ø°Ø±Ù‹Ø§ Ù‚Ù„ÙŠÙ„Ø§Ù‹.',
        2: 'Ø­Ø¸ Ù…Ù†Ø®ÙØ¶ â€” Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰!',
        1: 'Ø§Ù„ÙŠÙˆÙ… ÙŠØ­ØªØ§Ø¬ ØµØ¨Ø±Ø§Ù‹ â€” Ù„Ø§ ØªÙŠØ£Ø³ ğŸ˜…'
      };
      return msgs[n] || 'Ø­Ø¸ Ø³Ø¹ÙŠØ¯!';
    }

    // Ø§Ù„Ù…Ù†Ø·Ù‚ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ Ù„Ù„Ø±Ù…ÙŠ
    let rolling = false;
    function rollDice(){
      if(rolling) return;
      rolling = true;
      startBtn.disabled = true;
      resultEl.textContent = 'Ø¬Ø§Ø±Ù Ø§Ù„Ø±Ù…ÙŠ...';
      // ØªØ´ØºÙŠÙ„ Ø§Ù„ØµÙˆØª
      playRollSound();

      // Ù†Ø­Ø¯Ø¯ Ø¯ÙˆØ±Ø§Øª Ø¹Ø´ÙˆØ§Ø¦ÙŠØ© Ø¹Ù„Ù‰ Ù…Ø¶Ø§Ø¹ÙØ§Øª PI/2 (Ø­ØªÙ‰ ØªÙ†ØªÙ‡ÙŠ Ø¹Ù„Ù‰ Ø£Ø­Ø¯ Ø£ÙˆØ¬Ù‡ Ø§Ù„Ù…ÙƒØ¹Ø¨)
      const spins = 2 + Math.floor(Math.random()*4); // 2..5
      const tx = (Math.PI/2) * (Math.floor(Math.random()*4) + spins*4);
      const ty = (Math.PI/2) * (Math.floor(Math.random()*4) + spins*4);
      const tz = (Math.PI/2) * (Math.floor(Math.random()*4) + spins*4);

      gsap.to(dice.rotation, {
        x: tx, y: ty, z: tz,
        duration: 1.25,
        ease: 'power3.out',
        onUpdate: function(){
          // Ø¸Ù„ Ù…ØªØºÙŠØ± Ø¨Ø³ÙŠØ·
          shadow.scale.set(1 + Math.abs(Math.sin(dice.rotation.x)) * 0.12, 1, 1);
        },
        onComplete: function(){
          // Ø¹Ø«Ø± Ø¹Ù„Ù‰ Ø§Ù„ÙˆØ¬Ù‡ Ø§Ù„Ø¹Ù„ÙˆÙŠ Ø«Ù… Ù‚Ù… Ø¨Ø§Ù„Ù€ snap Ù„ÙˆØ¶Ø¹ÙŠØ© Ø¯Ù‚ÙŠÙ‚Ø©
          const num = getTopNumber();
          const idx = faceToNumber.indexOf(num);
          const targetEuler = faceEulers[idx] || new THREE.Euler(0,0,0);
          const extra = (Math.random()-0.5) * 0.45;
          const final = { x: targetEuler.x, y: targetEuler.y + extra, z: targetEuler.z };
          gsap.to(dice.rotation, {
            x: final.x, y: final.y, z: final.z,
            duration: 0.38, ease: 'power2.out',
            onComplete: function(){
              const finalNum = getTopNumber();
              resultEl.textContent = Ø­ØµÙ„Øª Ø¹Ù„Ù‰ ${finalNum} â€” ${getLuckMessage(finalNum)};
              rolling = false;
              startBtn.disabled = false;
            }
          });
        }
      });
    }

    startBtn.addEventListener('click', function(){
      // ÙÙŠ Ø¨Ø¹Ø¶ Ø§Ù„Ù…ØªØµÙØ­Ø§Øª ØªØ­ØªØ§Ø¬ ØªÙØ¹ÙŠÙ„ ØµÙˆØª AudioContext Ø¹Ø¨Ø± ØªÙØ§Ø¹Ù„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
      if(audioCtx && audioCtx.state === 'suspended'){ audioCtx.resume(); }
      rollDice();
    });

    // Ø¯Ø¹Ù… Ù…ÙØªØ§Ø­ Ø§Ù„Ù…Ø³Ø§ÙØ©
    window.addEventListener('keydown', function(e){
      if(e.code === 'Space'){ e.preventDefault(); startBtn.click(); }
    });

    // Ø­Ù„Ù‚Ø© Ø§Ù„Ø±Ø³Ù…
    function animate(){
      requestAnimationFrame(animate);
      controls.update();
      renderer.render(scene, camera);
    }
    animate();

    // ØªØ­Ø³ÙŠÙ† Ø§Ù„ØªÙ‘Ø£Ø·ÙŠØ± Ø¨Ø­Ø³Ø¨ Ø§Ù„Ø¹Ø±Ø¶ (desktop vs mobile)
    function frameForSize(){
      const wrap = document.getElementById('canvas-wrap');
      if(!wrap) return;
      const w = wrap.clientWidth;
      if(w > 900){ camera.position.set(4.2,4.2,4.2); } else { camera.position.set(3.2,3.2,3.2); }
      camera.lookAt(0,0.35,0);
    }
    window.addEventListener('resize', function(){ resize(); frameForSize(); });
    frameForSize();

    // ÙØ­Øµ WebGL
    if(!renderer.getContext()){
      resultEl.textContent = 'Ù‡Ø°Ø§ Ø§Ù„Ù…ØªØµÙØ­ Ù„Ø§ ÙŠØ¯Ø¹Ù… WebGL. Ø¬Ø±Ù‘Ø¨ Ù…ØªØµÙØ­ Ø­Ø¯ÙŠØ« Ù…Ø«Ù„ Chrome Ø£Ùˆ Firefox.';
    }

  })();
  </script>
</body>
</html>